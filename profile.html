<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil korisnika</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

   <style>
input,
textarea {
    touch-action: manipulation; /* Omogućava manipulaciju bez zumiranja */
    
}


      
        /* Chat modal, smješten u donji desni ugao za desktop, full screen za mobilne uređaje */
        #chat-modal {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 600px;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            z-index: 1000;
            flex-direction: column;
            overflow: hidden;
        }

       

        /* Gornji dio sa X dugmetom za zatvaranje */
        #chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #5a99cd;
            color: white;
        }

        #close-chat {
            background: none;
            border: none;
            font-size: 1.5em;
            color: white;
            cursor: pointer;
        }

        #chat-box {
            display: flex;
            flex-direction: column;
            height: 100%;
        }


        #chat-message {
        width: 100px; /* Postavi željenu širinu */
        padding: 5px; /* Smanji unutrašnji razmak */
        font-size: 14px; /* Smanji veličinu fonta */
    }

        #users-list {
    display: flex;
    flex-direction: column; /* Stack users vertically */
    gap: 15px; /* Add space between users */
    padding: 10px;
}

.user-item {
    display: flex; /* Align elements horizontally */
    align-items: center; /* Center image and text vertically */
    gap: 10px; /* Space between profile image and text */
    padding: 10px;
    border-bottom: 1px solid #ccc; /* Add a separator line */
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.user-item:hover {
    background-color: #3f78a9; /* Tamnija boja kada se prelazi mišem */
}



/* User info styling */
.user-info {
    display: flex;
    flex-direction: column; /* Stack name and last message vertically */
}

.user-info .user-name {
    font-weight: bold; /* Bold the username */
    margin-bottom: 5px; /* Add space below the name */
}

.user-info .last-message {
    color: #666; /* Gray color for the last message */
    font-size: 14px; /* Slightly smaller font size */
    overflow: hidden;
    text-overflow: ellipsis; /* Truncate long messages */
    white-space: nowrap; /* Prevent text from wrapping */
}

        /* Poruke u chat prozoru */
        #messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        .message {
    display: block; /* Osigurajte da je svaki element u novom redu */
    margin: 5px 0; /* Razmak između poruka */
    padding: 10px; /* Unutarnji razmak za bolju čitljivost */
    border-radius: 5px; /* Zaobljeni rubovi */
    word-wrap: break-word; /* Omogućuje prelamanje riječi */
    max-width: 80%; /* Maksimalna širina poruke */
}



        /* Donji dio s unosom poruke */
        #message-input {
    display: flex;
    gap: 10px;
    padding: 10px;
    position: sticky; /* Fiksirano na dno, ali unutar tok dokumenta */
    bottom: 0;
    width: 100%; /* Osigurava da unos zauzima cijelu širinu chata */
    background-color: white; /* Dodaj pozadinu */
    border-top: 1px solid #ccc; /* Gornja linija za odvajanje od poruka */
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* Blaga sjena za vizualni efekat */
    z-index: 10; /* Osiguraj da unos bude iznad poruka */
}


/* Unosno polje */
#message-input input {
    flex-grow: 1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

/* Dugme za slanje */
#message-input button {
    padding: 10px;
    background-color: #5a99cd;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

       
       
       /* Prethodni CSS za div #messages, uz male izmjene */
/* Kontejner za poruke */
#messages {
    display: flex;
    flex-direction: column; /* Da poruke idu vertikalno jedna ispod druge */
    flex-grow: 1;
    overflow-y: auto; /* Omogućava skrolanje poruka */
    padding-bottom: 40px; /* Dovoljno prostora ispod zadnje poruke */
    max-height: calc(100% - 70px); /* Visina poruka minus unos */
    box-sizing: border-box; /* Padding uključen u ukupnu visinu */
}

.message {
    padding: 10px;
    border-radius: 5px;
    margin: 5px 0;
    max-width: 60%; /* Maksimalna širina poruke */
    word-wrap: break-word; /* Da tekst ne prelazi okvir poruke */
}

.message.sender {
    background-color: #5a99cd; /* Plava pozadina za logovanog korisnika */
    color: white;
    margin-left: auto; /* Pomeri poruku sendera desno */
    text-align: right; /* Tekst unutar poruke poravnaj desno */
}

.message.recipient {
    background-color: lightgray; /* Siva pozadina za drugog korisnika */
    color: black;
    margin-right: auto; /* Pomeri poruku recipienta levo */
    text-align: left; /* Tekst unutar poruke poravnaj levo */
}




#search-container {
    display: flex;
    align-items: center;
    margin-bottom: 20px; /* Razmak između pretrage i liste korisnika */
}

#user-search {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    width: 250px; /* Širina polja za pretragu */
    font-size: 16px;
}

#search-button {
    background-color: #4CAF50; /* Zelena boja */
    color: white; /* Bijela boja teksta */
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 10px; /* Razmak između polja za pretragu i dugmeta */
    font-size: 16px;
    transition: background-color 0.3s ease; /* Animacija za hover */
}

#search-button:hover {
    background-color: #45a049; /* Tamnija zelena kada se pređe mišem */
}

#search-button:focus {
    outline: none; /* Uklanja plavi rub kad je dugme fokusirano */
}


/* Stilovi za modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4); /* Crna pozadina sa transparentnošću */
}

.modal-content {
    background-color: white;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 400px;
    border-radius: 10px;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover, .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}


.user-item img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    background-color: #5a99cd; /* Fallback background */
}



.message img {
    max-width: 100px; /* Limits the width of the image */
    max-height: 100px; /* Limits the height of the image */
    border-radius: 8px; /* Adds rounded corners */
    margin-bottom: 10px; /* Adds spacing below the image */
    object-fit: cover; /* Ensures the image covers the area without being distorted */
}

/* The modal for full-screen image */
.image-modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1000; /* Ensure it appears above other elements */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0, 0, 0, 0.9); /* Black background with transparency */
}

/* Image inside the modal */
.modal-content {
    margin: auto;
    display: block;
    max-width: 90%;
    max-height: 90%;
}

/* Close button */
.close {
    position: absolute;
    top: 20px;
    right: 35px;
    color: white;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}
@media screen and (max-width: 768px) {
    .image-modal {
        align-items: flex-start; /* Align the image to the top */
        padding-top: 250px; /* Add padding at the top to push the image down */
    }

    .modal-content {
        max-width: 95%;
        max-height: 70%; /* Keep the height smaller for mobile */
    }
}



#send-image {
        width: 40px; /* Širina dugmeta */
        height: 40px; /* Visina dugmeta */
        font-size: 20px; /* Veličina fonta unutar dugmeta */
        background-color: #f0f0f0; /* Svijetlo siva boja pozadine */
        border: none;
        border-radius: 5px; /* Zaobljeni uglovi */
        cursor: pointer;
    }

    /* Smanjenje pozadine dugmeta za video poziv */
    #start-call {
        width: 40px; /* Širina dugmeta */
        height: 40px; /* Visina dugmeta */
        padding: 5px; /* Manji unutrašnji razmak */
        font-size: 18px; /* Veličina ikone */
        background-color: rgba(0, 0, 0, 0.1); /* Smanjena pozadina */
        border: none;
        border-radius: 5px; /* Zaobljeni uglovi */
        cursor: pointer;
    }

/* Main container for all products */
.marketplace-outline {
    padding: 20px;
    border: 2px solid #ccc; /* Outer border for the entire marketplace */
    background-color: #fff; /* White background */
    border-radius: 10px;
    max-width: 1200px;
    margin: 0 auto; /* Center the container */
}

/* Container for individual products */
.product {
        border: 5px solid; /* Postavite debljinu obruba */
        border-image: linear-gradient(to right, #5a99cd, #4b0078) 1; /* Gradijentni obrub s lijeva na desno */
        border-radius: 8px; /* Zaobljeni uglovi */
        padding: 10px; /* Unutarnji razmak */
        margin: 10px; /* Vanjski razmak između proizvoda */
        display: flex;
        flex-direction: column;
        align-items: center;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Blaga sjena za bolji izgled */
    }

    .product img {
        width: 200px;
        height: 200px;
        object-fit: cover;
        margin-bottom: 10px;
        border-radius: 8px;
    }

    .product-list-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px; /* Razmak između proizvoda */
        justify-content: center; /* Centriranje proizvoda */
    }

/* Individual product box */
.product-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 200px; /* Set fixed width */
    height: 300px; /* Set fixed height */
    padding: 10px;
    background-color: #f9f9f9; /* Light background for products */
    border: 1px solid #ccc; /* Border for each product */
    border-radius: 8px;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
}

/* Image styling for each product */
.product-box img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 10px;
}

/* Product name styling */
.product-name {
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 5px;
}

/* Product price styling */
.product-price {
    font-size: 14px;
    color: #333;
    margin-bottom: 10px;
}

/* 'Kupi' button styling */
.buy-button {
    width: 100%;
    padding: 8px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.buy-button:hover {
    background-color: #45a049;
}

.marketplace-outline h2 {
        text-align: center; /* Centrira tekst naslova */
        margin-bottom: 20px; /* Dodaje razmak ispod naslova */
        font-weight: bold; /* Podebljava naslov */
    }

        /* Stilovi za profilnu stranicu */
        .profile-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .product {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: bold;
        }

        .product-price {
            margin: 5px 0;
        }

        .buy-button, .set-price-button {
            padding: 10px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .buy-button {
            background-color: green;
            color: white;
        }

        .set-price-button {
            background-color: blue;
            color: white;
        }

        .input-price {
            width: 100px;
            padding: 5px;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>

    <header class="header-container">
        <div id="greeting">Pozdrav, <span id="logged-in-user"></span></div>
        <div id="current-price-display">Trenutna cijena: <span id="current-price">0.00</span> Delta coin</div>
        
        <!-- Toggle button for mobile devices -->
        <button id="toggle-menu-button" class="toggle-button">☰</button>
        
        <!-- Desktop menu -->
        <nav id="desktop-menu">
            <a href="#"><span class="material-icons">home</span> Home</a>
            <a href="#"><span class="material-icons">group</span> Team</a>
            <a href="#" id="chat-link"><span class="material-icons">chat</span> Chat</a>
            <a href="#"><span class="material-icons">person</span> Profile</a>
        </nav>
    </header>
    

<div id="chat-modal">
    <div id="chat-header">
        <span id="chat-header-title">Chat</span>
        <button id="close-chat">✕</button>
        <button id="back-to-users" style="display: none;">←</button> <!-- Dodajemo dugme za povratak -->
        
    </div>
    
    <div id="chat-box">
        <div id="search-container">
            <input type="text" id="user-search" placeholder="Search users...">
            <button id="search-button">🔍</button>
        </div>
       
        <div id="users-list"></div>

    
        
        <div id="users-list"></div> <!-- Prikaz korisnika u krugovima -->
        <div id="messages" style="display: none;"></div> <!-- Skriveno dok ne odabereš korisnika -->
        <div id="message-input" style="display: none;">
            <button id="send-image">+</button> <!-- Dugme za dodavanje slike -->
            
            <button id="start-call"><span class="material-icons">videocam</span></button>


            <input type="text" id="chat-message" placeholder="Unesite poruku">
            <button id="send-message">Pošalji</button>
        </div>
        
    </div>
    
</div>

<!-- Modal for full-screen image -->
<div id="image-modal" class="image-modal">
<span id="close-image-modal" class="close">&times;</span>
<img class="modal-content" id="full-screen-image">
</div>


<script>
    document.addEventListener('click', function(event) {
    if (event.target.tagName === 'IMG' && event.target.parentElement.classList.contains('message')) {
        const modal = document.getElementById('image-modal');
        const modalImg = document.getElementById('full-screen-image');
        modal.style.display = 'block';
        modalImg.src = event.target.src; // Set the image source to the clicked image
    }
});

// Close the modal when the close button is clicked
document.getElementById('close-image-modal').addEventListener('click', function() {
    document.getElementById('image-modal').style.display = 'none';
});

</script>


    
    <script>
        const toggleMenuButton = document.getElementById('toggle-menu-button');
        const toggleMenu = document.getElementById('toggle-menu');

        toggleMenuButton.addEventListener('click', () => {
            // Togglovanje prikaza menija
            if (toggleMenu.style.display === 'flex') {
                toggleMenu.style.display = 'none'; // Sakrij meni
            } else {
                toggleMenu.style.display = 'flex'; // Prikaži meni
            }
        });
    </script>

   



<script>
    function scrollToBottom() {
    const messagesDiv = document.getElementById('messages');
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

</script>



    <div class="container">
        <div class="icon-section">
            <div class="icon" id="dolar-icon">
                <span class="material-icons">attach_money</span>
                <span class="amount">0.00/h</span>
            </div>
        </div>
        
        <!-- Dodavanje ikone za broj referral koda ispod trenutne cijene -->
        <div id="referral-info">
            <span class="material-icons" style="vertical-align: middle;">group</span> 
            <span id="referral-count">0/10</span> <!-- Prikaz broja referral koda -->
        </div>

        <!-- Ikona za dijeljenje -->
        <button id="share-icon">
            <span class="material-icons">share</span> Pozovi prijatelje
        </button>
    </div>

    <div class="image-container">
        <img src="images/delta.png" alt="Delta Image" style="max-width: 100%; height: auto;">
    </div>

    <script>
        const shareIcon = document.getElementById('share-icon');

        // Pretpostavljamo da korisničko ime dolazi iz URL parametara ili je već definirano
        const { username: userParam } = getQueryParams();

        // Funkcija za nativno dijeljenje
        shareIcon.addEventListener('click', async () => {
            const shareData = {
                title: 'Poziv za pridruživanje',
                text: `Zdravo, pridruži mi se na https://nftnox.github.io/pi8/registracija.html. Moj kod je ${userParam}`
            };

            try {
                await navigator.share(shareData);
                console.log('Uspješno podijeljeno');
            } catch (err) {
                console.error('Greška prilikom dijeljenja:', err);
            }
        });

        // Funkcija za dobijanje parametara iz URL-a
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                ime: params.get('ime'),
                prezime: params.get('prezime'),
                username: params.get('username')
            };
        }
    </script>









    <div class="partnership-box">
        <p>
            Delta coin is selecting partnerships with crypto-services and general businesses ahead of our Open Network launch. 
            This is a unique, early opportunity for businesses to connect with over 10 million engaged Delta coin fans and become part of Delta’s rapidly expanding Web3 ecosystem. 
            If your company is interested in partnering with Delta or you’d like to introduce a business to partner with Delta, tap “Partnerships” to explore how and why.
        </p>
    </div>

   

    <div class="background blue"></div>
    <div class="background purple"></div>




//kupljeni//
        <div>
        <h1 id="profile-title"></h1>
        <div id="profile-products"></div>
    </div>




    <script type="module">
       import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
        import { getFirestore, collection, getDocs, query, where, doc, getDoc, updateDoc, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBKfTE0qZdxVLq0lvmli367_yyqpGK-fPA",
            authDomain: "piii-7844e.firebaseapp.com",
            projectId: "piii-7844e",
            storageBucket: "piii-7844e.appspot.com",
            messagingSenderId: "315770496799",
            appId: "1:315770496799:web:0197d4baf2c8731d88722a",
            measurementId: "G-JH9SDWTS9V"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);



        

        

        // Dohvati parametre iz URL-a
        const params = new URLSearchParams(window.location.search);
        const profileName = params.get('ime');
        const loggedInUser = params.get('loggedInUser');
        let currentPrice = parseFloat(params.get('trenutnaCijena'));

        let loggedInUserIme = ''; // Varijabla za pravo ime prijavljenog korisnika
        let loggedInUserId = ''; // Varijabla za ID prijavljenog korisnika u Firestore-u

        // Funkcija za dobijanje 'ime' korisnika na osnovu 'username'
        async function getLoggedInUserIme() {
            const userCollection = collection(db, 'network');
            const q = query(userCollection, where('username', '==', loggedInUser));
            const querySnapshot = await getDocs(q);

            if (!querySnapshot.empty) {
                querySnapshot.forEach(docSnap => {
                    const userData = docSnap.data();
                    loggedInUserIme = userData.ime;
                    loggedInUserId = docSnap.id;
                });
            } else {
                console.error("Korisnik ne postoji u Firestore-u.");
            }
        }

        // Pozovi funkciju za dobijanje 'ime' korisnika
        await getLoggedInUserIme();

        // Prikaži ime prijavljenog korisnika i trenutnu cijenu
        document.getElementById('logged-in-user').innerText = loggedInUserIme;
        document.getElementById('current-price').innerText = currentPrice.toFixed(2);

        // Prikaži naslov profila
        const profileTitle = document.getElementById('profile-title');
        profileTitle.innerText = loggedInUserIme === profileName ? 'Vaš profil' : `Profil korisnika: ${profileName}`;

        // Učitaj proizvode korisnika
        async function loadProfileProducts() {
            const productCollection = collection(db, 'products');
            const querySnapshot = await getDocs(productCollection);
            const profileProducts = document.getElementById('profile-products');
            profileProducts.innerHTML = '';

            querySnapshot.forEach(docSnap => {
                const productData = docSnap.data();

                if (productData.ownerName === profileName) {
                    const productDiv = document.createElement('div');
                    productDiv.classList.add('product');

                    const productImg = document.createElement('img');
                    productImg.src = productData.imageUrl;
                    productDiv.appendChild(productImg);

                    const productName = document.createElement('div');
                    productName.classList.add('product-name');
                    productName.innerText = productData.name;
                    productDiv.appendChild(productName);

                    const productPrice = document.createElement('div');
                    productPrice.classList.add('product-price');
                    productPrice.innerText = `Cijena: ${productData.price} Delta coin`;
                    productDiv.appendChild(productPrice);

                    if (profileName === loggedInUserIme) {
                        // Dodaj opciju za postavljanje nove cijene
                        const priceInput = document.createElement('input');
                        priceInput.type = 'number';
                        priceInput.placeholder = 'Nova cijena';
                        priceInput.classList.add('input-price');

                        const setPriceButton = document.createElement('button');
                        setPriceButton.innerText = 'Postavi cijenu';
                        setPriceButton.classList.add('set-price-button');
                        setPriceButton.addEventListener('click', async () => {
                            const novaCijena = parseFloat(priceInput.value);
                            if (!isNaN(novaCijena) && novaCijena > 0) {
                                await updateDoc(doc(db, 'products', docSnap.id), { price: novaCijena });
                                alert('Nova cijena postavljena!');
                                loadProfileProducts(); // Osvježi prikaz
                            } else {
                                alert('Unesite ispravnu cijenu!');
                            }
                        });

                        productDiv.appendChild(priceInput);
                        productDiv.appendChild(setPriceButton);
                    } else {
                        // Dodaj dugme za kupovinu proizvoda
                        const buyButton = document.createElement('button');
                        buyButton.innerText = 'Kupi';
                        buyButton.classList.add('buy-button');
                        buyButton.addEventListener('click', async () => {
                            if (currentPrice >= productData.price) {
                                await updateProductOwnership(docSnap.id, productData);
                            } else {
                                alert('Nemate dovoljno sredstava!');
                            }
                        });

                        productDiv.appendChild(buyButton);
                    }

                    profileProducts.appendChild(productDiv);
                }
            });
        }

        // Ažuriranje vlasništva proizvoda
        async function updateProductOwnership(productId, productData) {
            // Dodavanje proizvoda u purchases novog vlasnika
            const userPurchasesRef = collection(db, `network/${loggedInUserId}/purchases`);
            await addDoc(userPurchasesRef, {
                name: productData.name,
                imageUrl: productData.imageUrl,
                price: productData.price,
                purchaseTime: new Date()
            });

            // Oduzimanje cijene proizvoda od trenutne cijene novog vlasnika u Firestore-u
            const userDocRef = doc(db, 'network', loggedInUserId);
            currentPrice -= productData.price;
            await updateDoc(userDocRef, { currentPrice: currentPrice });

            document.getElementById('current-price').innerText = currentPrice.toFixed(2);

            // Dodavanje cijene proizvoda na trenutnu cijenu prodavca
            const sellerId = productData.owner; // ID prodavca
            const sellerDocRef = doc(db, 'network', sellerId);
            const sellerDocSnap = await getDoc(sellerDocRef);

            if (sellerDocSnap.exists()) {
                const sellerData = sellerDocSnap.data();
                let sellerCurrentPrice = sellerData.currentPrice || 0;
                sellerCurrentPrice += productData.price;

                await updateDoc(sellerDocRef, { currentPrice: sellerCurrentPrice });

                console.log(`Dodano ${productData.price} Delta coin korisniku ${productData.ownerName}. Nova cijena: ${sellerCurrentPrice.toFixed(2)}`);
            } else {
                console.error("Prodavac nije pronađen u Firestore-u.");
            }

            // Ažuriranje proizvoda u glavnoj kolekciji
            await updateDoc(doc(db, 'products', productId), {
                owner: loggedInUserId,
                ownerName: loggedInUserIme, // Koristimo pravo ime korisnika za 'ownerName'
                sold: true
            });

            alert(`Kupili ste ${productData.name} za ${productData.price} Delta coin!`);
            loadProfileProducts(); // Osvježi prikaz
        }

        // Pozovi funkciju za učitavanje proizvoda
        loadProfileProducts();
    </script>








































<style>
    body {
        font-family: 'Roboto', sans-serif; /* Promjena fonta */
        margin: 0;
        padding: 0;
        background-color: black;
        
       
    }
   

    @media (max-width: 768px) {
    html, body {
        width: 100%;
        overflow-x: hidden; /* Onemogućava horizontalno pomjeranje */
        margin: 0; /* Uklanja podrazumijevane margine */
        padding: 0; /* Uklanja podrazumijevane paddinge */
    }

    /* Osiguraj da svi kontejneri i elementi imaju odgovarajuću širinu */
    * {
        max-width: 100%; /* Ograničava širinu na 100% */
        box-sizing: border-box; /* Uključuje padding i border u ukupnu širinu */
    }

    img {
        max-width: 100%; /* Održava slike unutar širine kontejnera */
        height: auto; /* Održava odnos slike */
    }

    /* Podesi širinu specifičnih elemenata ako je potrebno */
    .some-element { /* Zameniti sa stvarnim klasama */
        width: 100%; /* Ili odgovarajući procenat */
    }
}

    .background {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .blue {
    background: linear-gradient(to bottom right, rgba(23, 135, 226, 0.6), rgba(0, 0, 0, 0) 50%);
    position: absolute;
    top: 0;
    left: 0;
    width: 50%;
    height: 50%;
    
}


.purple {
    background: linear-gradient(to top left, rgba(128, 0, 128, 0.6), rgba(0, 0, 0, 0) 50%);
    position: fixed; /* Changed to fixed to always stick to the bottom-right */
    bottom: 0;
    right: 0;
    width: 50%;
    height: 50%;
    z-index: 1; /* Make sure it stays below other content if necessary */
}



        
    nav {
        display: flex;
        gap: 20px;
    }
    nav a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
    }
    nav .material-icons {
        margin-right: 5px; /* Razmak između ikone i teksta */
    }
    .container {
        display: flex;
        
        padding: 20px;
    }
    .icon-section {
    flex: 2;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 20px;
}

.icon {
    background-color: transparent; /* Prozirna pozadina */
    border-radius: 0; /* Pravougaoni oblik */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 120px; /* Širina pravougaonika */
    height: 60px; /* Visina pravougaonika */
    font-size: 24px;
    cursor: pointer;
    position: relative;
    background: transparent; /* Prozirna pozadina */
    color: white; /* Bijela boja teksta */
    border: 2px solid transparent; /* Prozirni obrub (outline) */
    border-image: linear-gradient(to right, #5a99cd, #4b0078) 1; /* Gradijentni obrub s lijeva na desno */


    

    
}

   
    .amount {
        font-size: 24px;
        margin-left: 2px;
    }


/* Stil za ikonice */
.material-icons {
    vertical-align: middle; /* Poravnanje ikone sa tekstom */
    margin-right: 8px; /* Razmak između ikone i teksta */
}


#share-icon {
    background-color: transparent; /* Prozirna pozadina */
    border-radius: 0; /* Pravougaoni oblik */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 150px; /* Širina pravougaonika */
    height: 60px; /* Visina pravougaonika */
    font-size: 22px;
    cursor: pointer;
    position: relative;
    background: transparent; /* Prozirna pozadina */
    color: white; /* Bijela boja teksta */
    border: 2px solid transparent; /* Prozirni obrub (outline) */
    border-image: linear-gradient(to right, #5a99cd, #4b0078) 1; /* Gradijentni obrub s lijeva na desno */


}

#share-icon span.material-icons {
    font-size: 24px; /* Veličina ikone */
}


</style>




<style>
    .partnership-box {
        border-width: 2px; /* debljina obruba */
        border-style: solid; /* stil obruba */
        border-image: linear-gradient(to right, #5a99cd, #4b0078) 1; /* gradijentni obrub s lijeva na desno */
        padding: 20px; /* razmak unutar boxa */
        margin: 20px auto; /* razmak iznad i ispod boxa, centrirano */
        max-width: 600px; /* maksimalna širina boxa */
        text-align: justify; /* opravdanje teksta */
        background-color: #000; /* crna pozadina */
        color: #fff; /* bijela boja teksta */
        border-radius: 50px !important; /* povećanje zaobljenosti ivica */
    }

    .partnership-box p {
        margin: 0; /* uklanja zadani razmak oko paragrafa */
        text-indent: 0; /* nema uvlačenja prve linije */
        line-height: 1.6; /* povećava razmak između redova */
    }

    .partnership-box img {
    width: 100%; /* Postavi osnovnu širinu na 100% da se prilagođava */
    max-width: 600px; /* Maksimalna širina za desktop */
    height: auto; /* Automatsko prilagođavanje visine */
}

/* Za mobilne uređaje */
@media only screen and (max-width: 768px) {
    .partnership-box img {
        max-width: 350px; /* Maksimalna širina za mobitele */
    }
}

</style>




<style>
   header {

  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  position: relative; /* Omogućuje apsolutno pozicioniranje menija */
}


/* Toggle dugme */
.toggle-button {
  display: none; /* Skriveno po defaultu */
  font-size: 30px;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  margin-left: auto;
}

#toggle-menu {
  display: none; /* Skriveno po defaultu */
  flex-direction: column; /* Vertikalno poravnanje menija */
  background: linear-gradient(to bottom, #000000, #4b0078); /* Gradijent od plave do tamno ljubičaste */
  position: absolute;
  right: 0px;
  top: 60px;
  width: 50%;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
  z-index: 100;
}





#toggle-menu a {
  color: white;
  text-decoration: none;
  padding: 10px 20px;
  display: block;
  text-align: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* Stil za desktop meni */
#desktop-menu {
  display: flex;
}

#desktop-menu a {
  margin-left: 20px;
  text-decoration: none;
  color: white;
}

/* Media query za mobilne uređaje */
@media (max-width: 768px) {
  /* Prikaži toggle dugme na mobilnim uređajima */
  .toggle-button {
      display: block;
      transform: translateX(20px); /* Pomjera udesno za 20px */
  }
  /* Sakrij desktop meni na mobilnim uređajima */
  #desktop-menu {
      display: none;
  }

}

.image-container {
    display: flex;
    justify-content: center; /* Centriraj sliku */
    align-items: flex-start; /* Poravnaj gornji dio */
    position: relative;
}

@media (max-width: 768px) {
    .image-container {
        align-items: flex-start; /* Gornji dio */
        transform: translateY(10px); /* Pomakni prema dolje na mobilnim uređajima */
    }
}

.image-container img {
    animation: pulse 3s infinite; /* Animacija nazvana 'pulse' koja traje 2 sekunde i ponavlja se beskonačno */
}

@keyframes pulse {
    0% {
        transform: scale(1); /* Početna veličina */
    }
    50% {
        transform: scale(1.05); /* Blago povećanje veličine */
    }
    100% {
        transform: scale(1); /* Vraćanje na početnu veličinu */
    }
}


  </style>



<style>
    #current-price {
        transform: translateX(130px); /* Podesi ovu vrijednost prema željenom pomjeranju */
}

@media only screen and (max-width: 768px) {
    #current-price {
        transform: translateX(40px); /* Podesi ovu vrijednost prema željenom pomjeranju */
    }
}

#user-name {
    position: relative;
}

@media only screen and (max-width: 768px) {
    #user-name {
        transform: translateX(-20px); /* Pomjeranje ulijevo, prilagodi prema potrebi */
    }
}


</style>
</body>
</html>
